# Default values for commondataAPI.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

name: commondata-api
namespace: commondata

imagePullSecrets:
  name: regcred

container:
  image:
    repository: commondata
    pullPolicy: IfNotPresent
  port: 8080
  args:
    keycloak:
      app_cors_allowed_origins:
      app_cors_allowed_origins_1:
      app_cors_allowed_origins_2:
      app_cors_allowed_origins_3:
      keycloak_enabled: true
      keycloak_auth_server_url:
      keycloak_ssl_required: none
      keycloak_realm: appmod
      keycloak_resource: sage
      keycloak_bearer_only: true
      keycloak_autodetect_bearer_only: true
      keycloak_enable_basic_auth: false
      keycloak_use_resource_role_mappings: false
      keycloak_public_client: true
      keycloak_principal_attribute: preferred_username
      keycloak_master_username:
      keycloak_master_password:
      keycloak_admin_auth_server_url: 
      keycloak_admin_realm:

database_username: commondata-db-user
database_url:
database_name: commondata
database_password: #
redis_host:

ingress:
  enabled: true
  hosts:
    - sample.com
  # The ingress path. Useful to host metabase on a subpath, such as `/metabase`.
  path: /
  labels:
    # Used to add custom labels to the Ingress
    # Useful if for example you have multiple Ingress controllers and want your Ingress controllers to bind to specific Ingresses
    application: ""
  annotations:
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
  tls:
    - secretName: tls-sample.com
      hosts:
        - sample.com

istio:
  enabled: "true"
  hosts: ""
  gateways: istio-ingress/istio-autogenerated-k8s-ingress
  port: 8080

##### POSTGRES Configuration
postgresql:
  enabled: false
  common:
    image:
      pullSecrets: ""
      pullPolicy: "IfNotPresent"
  persistence:
    mountPath: /var/lib/postgresql/data
    subPath: commondata
    size: 20Gi
    storageClass: aws-efs
  # PostgreSQL User to create
  postgresqlUsername: commondata-db
  # PostgreSQL Password for the new user
  postgresqlPassword:
  # PostgreSQL Database to create
  postgresqlDatabase: commondata-db
  # Persistent Volume Storage configuration
